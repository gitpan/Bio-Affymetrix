<head>
<!-- Generated by perlmod2www.pl -->
<title>
CEL documentation.
</title>
</head>
<body bgcolor="white">
<HR><H4>Bio::Affymetrix</H4>
<H3>CEL</H3>
<A NAME="TOP"></A>
<TABLE BORDER="1" WIDTH="100%"><TR>
<TD><A HREF="#SUMMARY">Summary</A></TD>
<TD><A HREF="#vardefs">Package variables</A></TD>
<TD><A HREF="#SYNOPSIS">Synopsis</A></TD>
<TD><A HREF="#DESCRIPTION">Description</A></TD>
<TD><A HREF="#General">General documentation</A></TD>
<TD><A HREF="#Methods">Methods</A></TD>
</TR></TABLE><HR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR><TD BGCOLOR="#ffae84"><B>Summary</B></TD></TR>
</TABLE>
<TABLE BORDER="0" WIDTH="100%"><TR><TD><pre><B>Bio::Affymetrix::CEL</B>- parse Affymetrix CEL files<BR></pre></TD></TR>
</TABLE>
<A NAME="vardefs"></A>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD><B>Package variables</B></TD>
<TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE><TABLE BORDER="0" WIDTH="100%"><TR><TD COLSPAN="2">No package variables defined.</TD></TR>
</TABLE>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD WIDTH="150"><B>Included modules</B></TD><TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE><TABLE BORDER="0"><TR><TD COLSPAN="2"><b><font color="#0000ff">Carp</font></b></TD></TR>
<TR><TD COLSPAN="2"><b><font color="#0000ff">strict</font></b></TD></TR>
<TR><TD COLSPAN="2"><b><font color="#0000ff">warnings</font></b></TD></TR>
</TABLE>
<A NAME="SYNOPSIS"></A>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD><B>Synopsis</B></TD><TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE><TABLE BORDER="0"><TR><TD COLSPAN="2"><pre>use Bio::Affymetrix::CEL;<BR><BR># Parse the CDF file<BR><BR>my $cel=new <B>Bio::Affymetrix::CEL</B>();<BR><BR>$cel-&gt;parse_from_file(&quot;foo.cel&quot;);<BR><BR># Print out all of the intensities for each square<BR><BR>for (my $x=0;$x&lt;scalar(@{$cel-&gt;intensity_map()});$x++) {<BR>	for (my $y=0;$y&lt;scalar(@{cel-&gt;intensity_map()-&gt;[$x]});$y++) {<BR>		print join(&quot;,&quot;,($x,$y,$cel-&gt;intensity_map-&gt;[$x][$y]-&gt;[0]).&quot;\n&quot;;<BR>	}<BR>}<BR></pre>
</TD></TR></TABLE>
<A NAME="DESCRIPTION"></A>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD><B>Description</B></TD><TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE><TABLE BORDER="0"><TR><TD COLSPAN="2"><pre>The Affymetrix microarray system produces files in a variety of<BR>formats. If this means nothing to you, these modules are probably not<BR>for you :). This module parses CEL files. Use this module if you want<BR>to find out about the results for individual probes on an array.<BR><BR>All of the Bio::Affymetrix modules parse a file entirely into<BR>memory. You therefore need enough memory to hold these objects. For<BR>some applications, parsing as a stream may be more appropriate-<BR>hopefully the source to these modules will give enough clues to make<BR>this an easy task. This module takes lots of memory due to the way<BR>Perl stores arrays. If you are writing a program that uses many CEL<BR>files, delete each CEL file once you have the information you need<BR>from it.<BR></pre>
<pre>You fill the object filled with data using the<BR>parse_from_filehandle, parse_from_string or parse_from_file<BR>routines. You can get/set various statistics using methods on the<BR>object.<BR><BR>The key method is intensity_map. This returns a reference to a 2D<BR>array of parameters for each square.<BR></pre>
</TD></TR></TABLE>
<A NAME="Methods"></A>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0"><TR BGCOLOR="#ffae84"><TD><B>Methods</B></TD><TD ALIGN="RIGHT"><A HREF="#TOP">top</A></TD></TR></TABLE>
<TABLE BORDER="1" CELLSPACING="5"><TR><TD><B>_next_line</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE1">Code</A></TD></TR>
<TR><TD><B>_parse_header_section</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE2">Code</A></TD></TR>
<TR><TD><B>_parse_intensity_section</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE3">Code</A></TD></TR>
<TR><TD><B>_parse_mas5</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE4">Code</A></TD></TR>
<TR><TD><B>_parse_mask_section</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE5">Code</A></TD></TR>
<TR><TD><B>_parse_outlier_section</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE6">Code</A></TD></TR>
<TR><TD><B>_parse_xda</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE7">Code</A></TD></TR>
<TR><TD><B>_split_line</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE8">Code</A></TD></TR>
<TR><TD><B>_unpack_length_string</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE9">Code</A></TD></TR>
<TR><TD><B>algorithm_name</B></TD><TD><A HREF="#POD1">Description</A></TD><TD><A HREF="#CODE10">Code</A></TD></TR>
<TR><TD><B>algorithm_params</B></TD><TD><A HREF="#POD2">Description</A></TD><TD><A HREF="#CODE11">Code</A></TD></TR>
<TR><TD><B>axis_invert_x</B></TD><TD><A HREF="#POD3">Description</A></TD><TD><A HREF="#CODE12">Code</A></TD></TR>
<TR><TD><B>axis_invert_y</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE13">Code</A></TD></TR>
<TR><TD><B>grid_corner_ll</B></TD><TD><A HREF="#POD4">Description</A></TD><TD><A HREF="#CODE14">Code</A></TD></TR>
<TR><TD><B>grid_corner_lr</B></TD><TD><A HREF="#POD5">Description</A></TD><TD><A HREF="#CODE15">Code</A></TD></TR>
<TR><TD><B>grid_corner_ul</B></TD><TD><A HREF="#POD6">Description</A></TD><TD><A HREF="#CODE16">Code</A></TD></TR>
<TR><TD><B>grid_corner_ur</B></TD><TD><A HREF="#POD7">Description</A></TD><TD><A HREF="#CODE17">Code</A></TD></TR>
<TR><TD><B>intensity_map</B></TD><TD><A HREF="#POD8">Description</A></TD><TD><A HREF="#CODE18">Code</A></TD></TR>
<TR><TD><B>new</B></TD><TD><A HREF="#POD9">Description</A></TD><TD><A HREF="#CODE19">Code</A></TD></TR>
<TR><TD><B>original_cols</B></TD><TD><A HREF="#POD10">Description</A></TD><TD><A HREF="#CODE20">Code</A></TD></TR>
<TR><TD><B>original_file_name</B></TD><TD><A HREF="#POD11">Description</A></TD><TD><A HREF="#CODE21">Code</A></TD></TR>
<TR><TD><B>original_format</B></TD><TD><A HREF="#POD12">Description</A></TD><TD><A HREF="#CODE22">Code</A></TD></TR>
<TR><TD><B>original_rows</B></TD><TD><A HREF="#POD13">Description</A></TD><TD><A HREF="#CODE23">Code</A></TD></TR>
<TR><TD><B>original_version</B></TD><TD><A HREF="#POD14">Description</A></TD><TD><A HREF="#CODE24">Code</A></TD></TR>
<TR><TD><B>parse_from_file</B></TD><TD><A HREF="#POD15">Description</A></TD><TD><A HREF="#CODE25">Code</A></TD></TR>
<TR><TD><B>parse_from_filehandle</B></TD><TD><A HREF="#POD16">Description</A></TD><TD><A HREF="#CODE26">Code</A></TD></TR>
<TR><TD><B>parse_from_string</B></TD><TD><A HREF="#POD17">Description</A></TD><TD><A HREF="#CODE27">Code</A></TD></TR>
<TR><TD><B>swap_xy</B></TD><TD><A HREF="#POD18">Description</A></TD><TD><A HREF="#CODE28">Code</A></TD></TR>
<TR><TD><B>write_to_filehandle</B></TD><TD><FONT COLOR="RED"><B>No description</B></FONT></TD><TD><A HREF="#CODE29">Code</A></TD></TR>
<TR><TD><B>x_offset</B></TD><TD><A HREF="#POD19">Description</A></TD><TD><A HREF="#CODE30">Code</A></TD></TR>
<TR><TD><B>y_offset</B></TD><TD><A HREF="#POD20">Description</A></TD><TD><A HREF="#CODE31">Code</A></TD></TR>
</TABLE>
<A NAME="MethDesc"></A>
<HR><H2>Methods description</H2>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_algorithm_name"></A><A NAME="POD1"></A><B>algorithm_name</B></TD><TD><A HREF="#CODE10">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD>prev</TD><TD><A HREF="#POD2">next</A></TD></TR></TABLE>
<pre>  Arg [1]    : 	string $algorithm_name (optional)<BR>  Example    : 	my $algorithm_name=$cel-&gt;algorithm_name();<BR>  Description:	Get/set the algorithm name that created this CEL file.<BR>  Returntype :	string<BR>  Exceptions : 	none<BR>  Caller     : 	general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_algorithm_params"></A><A NAME="POD2"></A><B>algorithm_params</B></TD><TD><A HREF="#CODE11">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD1">prev</A></TD><TD><A HREF="#POD3">next</A></TD></TR></TABLE>
<pre>  Arg [1]    : 	hashref $algorithm_params (optional)<BR>  Example    : 	my %algorithm_params=%{$cel-&gt;algorithm_params()};<BR><BR># Print margin of cells ignored for calculating signal<BR><BR>print $algorithm_params(&quot;CellMargin&quot;);<BR><BR>  Description:	Get/set the algorithm parameters for the CEL file creation<BR>  Returntype :	hashref<BR>  Exceptions : 	none<BR>  Caller     : 	general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_axis_invert_x(2)"></A><A NAME="POD3"></A><B>axis_invert_x(2)</B></TD><TD><A HREF="#CODE12">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD2">prev</A></TD><TD><A HREF="#POD4">next</A></TD></TR></TABLE>
<pre>  Arg [1]    : 	boolean $axis_invert_y (optional)<BR>  Example    : 	my $axis_invert_y=$cel-&gt;axis_invert_y()<BR>  Description: 	Get/set whether the Y axis is inverted. Always false in genuine CEL files Only available in MAS5 CEL files.<BR>  Returntype : boolean<BR>  Exceptions : none<BR>  Caller     : general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_grid_corner_ll"></A><A NAME="POD4"></A><B>grid_corner_ll</B></TD><TD><A HREF="#CODE14">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD3">prev</A></TD><TD><A HREF="#POD5">next</A></TD></TR></TABLE>
<pre>  Arg [1]    : 	integer $grid_corner_ll (optional)<BR>  Example    : 	my $grid_corner_ll=$cel-&gt;grid_corner_ll()<BR>  Description: 	Get/set the XY coordinates of the lower left grid corner in pixel coordinates. Only available in MAS5 CEL files.<BR>  Returntype : integer<BR>  Exceptions : none<BR>  Caller     : general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_grid_corner_lr"></A><A NAME="POD5"></A><B>grid_corner_lr</B></TD><TD><A HREF="#CODE15">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD4">prev</A></TD><TD><A HREF="#POD6">next</A></TD></TR></TABLE>
<pre>  Arg [1]    : 	integer $grid_corner_lr (optional)<BR>  Example    : 	my $grid_corner_lr=$cel-&gt;grid_corner_lr()<BR>  Description: 	Get/set the XY coordinates of the lower right grid corner in pixel coordinates. Only available in MAS5 CEL files.<BR>  Returntype : integer<BR>  Exceptions : none<BR>  Caller     : general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_grid_corner_ul"></A><A NAME="POD6"></A><B>grid_corner_ul</B></TD><TD><A HREF="#CODE16">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD5">prev</A></TD><TD><A HREF="#POD7">next</A></TD></TR></TABLE>
<pre>  Arg [1]    : 	integer $grid_corner_ul (optional)<BR>  Example    : 	my $grid_corner_ul=$cel-&gt;grid_corner_ul()<BR>  Description: 	Get/set the XY coordinates of the upper left grid corner in pixel coordinates. Only available in MAS5 CEL files.<BR>  Returntype : integer<BR>  Exceptions : none<BR>  Caller     : general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_grid_corner_ur"></A><A NAME="POD7"></A><B>grid_corner_ur</B></TD><TD><A HREF="#CODE17">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD6">prev</A></TD><TD><A HREF="#POD8">next</A></TD></TR></TABLE>
<pre>  Arg [1]    : 	integer $grid_corner_ur (optional)<BR>  Example    : 	my $grid_corner_ur=$cel-&gt;grid_corner_ur()<BR>  Description: 	Get/set the XY coordinates of the upper right grid corner in pixel coordinates. Only available in MAS5 CEL files.<BR>  Returntype : integer<BR>  Exceptions : none<BR>  Caller     : general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_intensity_map"></A><A NAME="POD8"></A><B>intensity_map</B></TD><TD><A HREF="#CODE18">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD7">prev</A></TD><TD><A HREF="#POD9">next</A></TD></TR></TABLE>
<pre>  Arg [1]    : 	optional arrayref<BR>  Example    : 	print $cel-&gt;intensity_map()-&gt;[0][0]-&gt;[0]<BR>  Description: 	Returns an reference to a 2D array. Each value in this array is another arrayref containing (in order):<BR>    Mean intensity, Standard Deviation of intensity, number of pixels<BR>  used in the calculation, a flag stating whether the user has masked<BR>  this square, a flag stating whether the software has called this<BR>  square an outlier.<BR>  Returntype : 2d arrayref<BR>  Exceptions : none<BR>  Caller     : general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_new"></A><A NAME="POD9"></A><B>new</B></TD><TD><A HREF="#CODE19">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD8">prev</A></TD><TD><A HREF="#POD10">next</A></TD></TR></TABLE>
<pre>  Arg [0]    : none<BR>  Example    : my $cel=new <B>Bio::Affymetrix::CEL</B>();<BR>  Description: constructor for CEL object<BR>  Returntype : new Bio::Affmetrix::CEL object<BR>  Exceptions : none<BR>  Caller     : general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_original_cols"></A><A NAME="POD10"></A><B>original_cols</B></TD><TD><A HREF="#CODE20">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD9">prev</A></TD><TD><A HREF="#POD11">next</A></TD></TR></TABLE>
<pre>  Arg [0]    : 	none<BR>  Example    : 	my $cols=$cel-&gt;original_cols()<BR>  Description: 	Get the number of cols originally reported on this chip<BR>  Returntype : integer<BR>  Exceptions : none<BR>  Caller     : general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_original_file_name"></A><A NAME="POD11"></A><B>original_file_name</B></TD><TD><A HREF="#CODE21">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD10">prev</A></TD><TD><A HREF="#POD12">next</A></TD></TR></TABLE>
<pre>  Arg [0]    : 	none<BR>  Example    : 	my $cel_file_name=$cel-&gt;original_file_name();<BR>  Description:	If this object was created using parse_from_file, the original filename. Otherwise undef.<BR>  Returntype :	string<BR>  Exceptions : 	none<BR>  Caller     : 	general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_original_format"></A><A NAME="POD12"></A><B>original_format</B></TD><TD><A HREF="#CODE22">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD11">prev</A></TD><TD><A HREF="#POD13">next</A></TD></TR></TABLE>
<pre>  Arg [0]    : 	none<BR>  Example    : 	my $format=$cel-&gt;original_format()<BR>  Description:	Returns the format of the CEL file parsed. Currently MAS5 or XDA<BR>  Returntype : 	string (&quot;MAS5&quot; or &quot;XDA&quot;)<BR>  Exceptions : 	none<BR>  Caller     : 	general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_original_rows"></A><A NAME="POD13"></A><B>original_rows</B></TD><TD><A HREF="#CODE23">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD12">prev</A></TD><TD><A HREF="#POD14">next</A></TD></TR></TABLE>
<pre>  Arg [0]    : 	none<BR>  Example    : 	my $rows=$cel-&gt;orignal_rows()<BR>  Description: 	Get the number of rows originally reported on this chip<BR>  Returntype : integer<BR>  Exceptions : none<BR>  Caller     : general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_original_version"></A><A NAME="POD14"></A><B>original_version</B></TD><TD><A HREF="#CODE24">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD13">prev</A></TD><TD><A HREF="#POD15">next</A></TD></TR></TABLE>
<pre>  Arg [0]    : 	none<BR>  Example    : 	my $version=$cel-&gt;original_version()<BR>  Description: 	Returns the version of the CEL file parsed. Encoded in file.<BR>  Returntype : string<BR>  Exceptions : none<BR>  Caller     : general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_parse_from_file"></A><A NAME="POD15"></A><B>parse_from_file</B></TD><TD><A HREF="#CODE25">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD14">prev</A></TD><TD><A HREF="#POD16">next</A></TD></TR></TABLE>
<pre>  Arg [1]    : 	string<BR>  Example    : 	$cel-&gt;parse_from_file($cel_filename);<BR>  Description:	Parse a CEL file from a file<BR>  Returntype :	none<BR>  Exceptions : 	dies if cannot open file<BR>  Caller     : 	general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_parse_from_filehandle"></A><A NAME="POD16"></A><B>parse_from_filehandle</B></TD><TD><A HREF="#CODE26">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD15">prev</A></TD><TD><A HREF="#POD17">next</A></TD></TR></TABLE>
<pre>  Arg [1]    : 	reference to filehandle<BR>  Example    : 	$cel-&gt;parse_from_filehandle(\*STDIN);<BR>  Description:	Parse a CEL file from a filehandle<BR>  Returntype :	none<BR>  Exceptions : 	none<BR>  Caller     : 	general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_parse_from_string"></A><A NAME="POD17"></A><B>parse_from_string</B></TD><TD><A HREF="#CODE27">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD16">prev</A></TD><TD><A HREF="#POD18">next</A></TD></TR></TABLE>
<pre>  Arg [1]    : 	string<BR>  Example    : 	$cel-&gt;parse_from_string($cel_file_in_a_string);<BR>  Description:	Parse a CEL file from a buffer in memory<BR>  Returntype :	none<BR>  Exceptions : 	none<BR>  Caller     : 	general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_swap_xy"></A><A NAME="POD18"></A><B>swap_xy</B></TD><TD><A HREF="#CODE28">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD17">prev</A></TD><TD><A HREF="#POD19">next</A></TD></TR></TABLE>
<pre>  Arg [1]    : 	boolean $swap_xy (optional)<BR>  Example    : 	my $swap_xy=$cel-&gt;swap_xy()<BR>  Description: 	Get/set whether the X and Y axis are swapped. Always false in genuine CEL files Only available in MAS5 CEL files.<BR>  Returntype : boolean<BR>  Exceptions : none<BR>  Caller     : general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_x_offset"></A><A NAME="POD19"></A><B>x_offset</B></TD><TD><A HREF="#CODE30">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD18">prev</A></TD><TD><A HREF="#POD20">next</A></TD></TR></TABLE>
<pre>  Arg [1]    : 	integer $x_offset (optional)<BR>  Example    : 	my $x_offset=$cel-&gt;x_offset()<BR>  Description: 	Get/Set the x offset. This is always 0 when parsed<BR>from a genuine CEL file. Only available in MAS5 CEL files<BR>  Returntype : integer<BR>  Exceptions : none<BR>  Caller     : general<BR></pre>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD WIDTH="200"><A NAME="_pod_y_offset"></A><A NAME="POD20"></A><B>y_offset</B></TD><TD><A HREF="#CODE31">code</A></TD><TD><A HREF="#TOP">top</A></TD><TD><A HREF="#POD19">prev</A></TD><TD><A HREF="#POD21">next</A></TD></TR></TABLE>
<pre>  Arg [1]    : 	integer $y_offset (optional)<BR>  Example    : 	my $y_offset=$cel-&gt;y_offset()<BR>  Description: 	Get/Set the y offset. This is always 0 when parsed<BR>from a genuine CEL file. Only available in MAS5 CEL files.<BR>  Returntype : integer<BR>  Exceptions : none<BR>  Caller     : general<BR></pre>
<A NAME="MethCode"></A>
<HR><H2>Methods code</H2>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE1"></A><B>_next_line</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30">prev</TD><TD WIDTH="30"><A HREF="#CODE2">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff00ff"><b>_next_line</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font>;
    
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$fh</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>;

    <font color="#0000ff"><b>do</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$q</font>=&lt;<font color="#1f32ff">$fh</font>&gt;;
	<font color="#4169e1"><b>chomp</b></font> <font color="#1f32ff">$q</font>;
    <font color="#0000ff"><b>}</b></font> <font color="#0000ff"><b>while</b></font> <font color="#0000ff"><b>(</b></font>!<font color="#4169e1"><b>eof</b></font> <font color="#1f32ff">$fh</font>&amp;&amp;<font color="#1f32ff">$q</font>=~<font color="#006400"><b>/^\s*$/</b></font><font color="#0000ff"><b>)</b></font>;

    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font>!<font color="#4169e1"><b>eof</b></font> <font color="#1f32ff">$fh</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$q</font>;
    <font color="#0000ff"><b>}</b></font> <font color="#0000ff"><b>else</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#0000ff"><b>return</b></font> <font color="#4169e1"><b>undef</b></font>;
    <font color="#0000ff"><b>}</b></font></pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE2"></A><B>_parse_header_section</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE1">prev</A></TD><TD WIDTH="30"><A HREF="#CODE3">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff00ff"><b>_parse_header_section</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$i</font>=<font color="#4169e1"><b>shift</b></font>;;
    <font color="#0000ff"><b>while</b></font> <font color="#0000ff"><b>(</b></font>!<font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$i</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_next_line</font><font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>)</b></font><font color="#0000ff"><b>)</b></font>=~<font color="#006400"><b>/^\[.*\]$/</b></font><font color="#0000ff"><b>)</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$name</font>,<font color="#1f32ff">$value</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_split_line</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$i</font><font color="#0000ff"><b>)</b></font>;
	<font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$name</font> <font color="#0000ff"><b>eq</b></font> <font color="#007400">"TotalX"</font> || <font color="#1f32ff">$name</font> <font color="#0000ff"><b>eq</b></font> <font color="#007400">"TotalY"</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	    ; <font color="#ff0000">## Do nothing- this contains no information</font><BR>	<font color="#0000ff"><b>}</b></font> <font color="#0000ff"><b>elsif</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$name</font> <font color="#0000ff"><b>eq</b></font> <font color="#007400">"AlgorithmParameters"</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font> 
	    <font color="#ff0000">## Apparently, this file can have = dilimited too</font><BR>	    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">@list</font>=<font color="#4169e1"><b>split</b></font> <font color="#006400"><b>/;/</b></font>,<font color="#1f32ff">$value</font>;
	    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">%ap</font>;
	    <font color="#0000ff"><b>foreach</b></font> <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">@list</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
		<font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$a</font>,<font color="#1f32ff">$b</font><font color="#0000ff"><b>)</b></font>=<font color="#4169e1"><b>split</b></font> <font color="#006400"><b>/:/</b></font>,<font color="#1f32ff">$q</font>;
		<font color="#1f32ff">$ap</font><font color="#0000ff"><b>{</b></font><font color="#1f32ff">$a</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$b</font>;
	    <font color="#0000ff"><b>}</b></font>

	    <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"ALGORITHMPARAMS"</font><font color="#0000ff"><b>}</b></font>=\<font color="#1f32ff">%ap</font>;

	<font color="#0000ff"><b>}</b></font> <font color="#0000ff"><b>else</b></font> <font color="#0000ff"><b>{</b></font>
	    <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#4169e1"><b>uc</b></font> <font color="#1f32ff">$name</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$value</font>;
	<font color="#0000ff"><b>}</b></font>
    <font color="#0000ff"><b>}</b></font>

    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$i</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE3"></A><B>_parse_intensity_section</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE2">prev</A></TD><TD WIDTH="30"><A HREF="#CODE4">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff00ff"><b>_parse_intensity_section</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;

    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$i</font>=<font color="#4169e1"><b>shift</b></font>;

    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$fh</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>;

    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">@intensitymap</font>;

    <font color="#1f32ff">$i</font>=&lt;<font color="#1f32ff">$fh</font>&gt;; <font color="#ff0000">## Two lines of junk</font><BR>    <font color="#1f32ff">$i</font>=&lt;<font color="#1f32ff">$fh</font>&gt;;


    <font color="#0000ff"><b>while</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$i</font>=&lt;<font color="#1f32ff">$fh</font>&gt;<font color="#0000ff"><b>)</b></font>=~<font color="#006400"><b>/^\s*(\d+)\s+(\d+)\s+([\d\.]+)\s+([\d\.]+)\s+(\d+)/o</b></font><font color="#0000ff"><b>)</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$intensitymap</font><font color="#0000ff"><b>[</b></font><font color="#1f32ff">$1</font><font color="#0000ff"><b>]</b></font><font color="#0000ff"><b>[</b></font><font color="#1f32ff">$2</font><font color="#0000ff"><b>]</b></font>=<font color="#0000ff"><b>[</b></font><font color="#1f32ff">$3</font>,<font color="#1f32ff">$4</font>,<font color="#1f32ff">$5</font>,<font color="#4169e1"><b>undef</b></font>,<font color="#4169e1"><b>undef</b></font><font color="#0000ff"><b>]</b></font>;
	
    <font color="#0000ff"><b>}</b></font>


    <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"_INTENSITY"</font><font color="#0000ff"><b>}</b></font>=\<font color="#1f32ff">@intensitymap</font>;


    <font color="#4169e1"><b>chomp</b></font> <font color="#1f32ff">$i</font>;
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$i</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE4"></A><B>_parse_mas5</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE3">prev</A></TD><TD WIDTH="30"><A HREF="#CODE5">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff00ff"><b>_parse_mas5</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;

    <font color="#ff0000">## Obtain file version, and do some rudimentary checking of information</font><BR>    
    <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FORMAT"</font><font color="#0000ff"><b>}</b></font>=<font color="#007400">"MAS5"</font>;
    
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$i</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_next_line</font><font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>)</b></font>;
    
    <font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$name</font>,<font color="#1f32ff">$value</font><font color="#0000ff"><b>)</b></font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_split_line</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$i</font><font color="#0000ff"><b>)</b></font>;
    
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$name</font> <font color="#0000ff"><b>ne</b></font> <font color="#007400">"Version"</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	croak <font color="#007400">"File does not look like a CEL file to me"</font>;
    <font color="#0000ff"><b>}</b></font>
    
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$value</font> <font color="#0000ff"><b>ne</b></font> <font color="#007400">"3"</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	croak <font color="#007400">"Can't understand any version of MAS5 CEL files other than 3"</font>;
    <font color="#0000ff"><b>}</b></font>
    
    <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"VERSION"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$value</font>;


    <font color="#ff0000">## Parse the rest of the file</font><BR>    <font color="#1f32ff">$i</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_next_line</font><font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>)</b></font>;

    <font color="#0000ff"><b>while</b></font> <font color="#0000ff"><b>(</b></font>!<font color="#4169e1"><b>eof</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$i</font> <font color="#0000ff"><b>eq</b></font> <font color="#007400">"[HEADER]"</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	    <font color="#1f32ff">$i</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_parse_header_section</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$i</font><font color="#0000ff"><b>)</b></font>;
	<font color="#0000ff"><b>}</b></font> <font color="#0000ff"><b>elsif</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$i</font> <font color="#0000ff"><b>eq</b></font> <font color="#007400">"[INTENSITY]"</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	    <font color="#1f32ff">$i</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_parse_intensity_section</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$i</font><font color="#0000ff"><b>)</b></font>;
	<font color="#0000ff"><b>}</b></font> <font color="#0000ff"><b>elsif</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$i</font> <font color="#0000ff"><b>eq</b></font> <font color="#007400">"[MASKS]"</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	    <font color="#1f32ff">$i</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_parse_mask_section</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$i</font><font color="#0000ff"><b>)</b></font>;
	<font color="#0000ff"><b>}</b></font> <font color="#0000ff"><b>elsif</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$i</font> <font color="#0000ff"><b>eq</b></font> <font color="#007400">"[OUTLIERS]"</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	    <font color="#1f32ff">$i</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_parse_outlier_section</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$i</font><font color="#0000ff"><b>)</b></font>;
	<font color="#0000ff"><b>}</b></font> <font color="#0000ff"><b>else</b></font> <font color="#0000ff"><b>{</b></font>
	    <font color="#1f32ff">$i</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_next_line</font><font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>)</b></font>;
	<font color="#0000ff"><b>}</b></font>
    <font color="#0000ff"><b>}</b></font></pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE5"></A><B>_parse_mask_section</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE4">prev</A></TD><TD WIDTH="30"><A HREF="#CODE6">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff00ff"><b>_parse_mask_section</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#4169e1"><b>shift</b></font>;

    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$i</font>;
    <font color="#1f32ff">$i</font>=readline <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>; <font color="#ff0000">## Two lines of junk</font><BR>    <font color="#1f32ff">$i</font>=readline <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>;

    <font color="#0000ff"><b>while</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$i</font>=readline <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>)</b></font>=~<font color="#006400"><b>/^\s*(\d+)\s+(\d+)\s*$/o</b></font><font color="#0000ff"><b>)</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"_INTENSITY"</font><font color="#0000ff"><b>}</b></font>-&gt;<font color="#0000ff"><b>[</b></font><font color="#1f32ff">$1</font><font color="#0000ff"><b>]</b></font><font color="#0000ff"><b>[</b></font><font color="#1f32ff">$2</font><font color="#0000ff"><b>]</b></font>-&gt;<font color="#0000ff"><b>[</b></font>3<font color="#0000ff"><b>]</b></font>=1;
    <font color="#0000ff"><b>}</b></font>


    <font color="#4169e1"><b>chomp</b></font> <font color="#1f32ff">$i</font>;
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$i</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE6"></A><B>_parse_outlier_section</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE5">prev</A></TD><TD WIDTH="30"><A HREF="#CODE7">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff00ff"><b>_parse_outlier_section</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#4169e1"><b>shift</b></font>;

    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$i</font>;
    <font color="#1f32ff">$i</font>=readline <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>; <font color="#ff0000">## Two lines of junk</font><BR>    <font color="#1f32ff">$i</font>=readline <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>;

    <font color="#0000ff"><b>while</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$i</font>=readline <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>)</b></font>=~<font color="#006400"><b>/^\s*(\d+)\s+(\d+)\s*$/o</b></font><font color="#0000ff"><b>)</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"_INTENSITY"</font><font color="#0000ff"><b>}</b></font>-&gt;<font color="#0000ff"><b>[</b></font><font color="#1f32ff">$1</font><font color="#0000ff"><b>]</b></font><font color="#0000ff"><b>[</b></font><font color="#1f32ff">$2</font><font color="#0000ff"><b>]</b></font>-&gt;<font color="#0000ff"><b>[</b></font>4<font color="#0000ff"><b>]</b></font>=1;
    <font color="#0000ff"><b>}</b></font>

    <font color="#4169e1"><b>chomp</b></font> <font color="#1f32ff">$i</font>;
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$i</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE7"></A><B>_parse_xda</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE6">prev</A></TD><TD WIDTH="30"><A HREF="#CODE8">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff00ff"><b>_parse_xda</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    
    <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FORMAT"</font><font color="#0000ff"><b>}</b></font>=<font color="#007400">"XDA"</font>;

    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$buffer</font>; 

    <font color="#ff0000">## First some trivia</font><BR>
    <font color="#0000ff"><b>(</b></font><font color="#4169e1"><b>read</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>, <font color="#1f32ff">$buffer</font>, 4<font color="#0000ff"><b>)</b></font>==4<font color="#0000ff"><b>)</b></font> or croak <font color="#007400">"Can no longer read from file"</font>;
    <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"VERSION"</font><font color="#0000ff"><b>}</b></font>= <font color="#4169e1"><b>unpack</b></font> <font color="#0000ff"><b>(</b></font><font color="#007400">"V"</font>, <font color="#1f32ff">$buffer</font><font color="#0000ff"><b>)</b></font>;
    
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"VERSION"</font><font color="#0000ff"><b>}</b></font>!=4<font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	carp <font color="#007400">"This CEL file is newer than the software parsing them. Results may be suspect."</font>; <font color="#ff0000">## die here, perhaps?</font><BR>    <font color="#0000ff"><b>}</b></font> 

    <font color="#ff0000">## CEL file trivia</font><BR>
    <font color="#0000ff"><b>(</b></font><font color="#4169e1"><b>read</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>, <font color="#1f32ff">$buffer</font>, 12<font color="#0000ff"><b>)</b></font>==12<font color="#0000ff"><b>)</b></font> or <font color="#4169e1"><b>die</b></font> <font color="#007400">"Can no longer read from file"</font>;
    <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"COLS"</font><font color="#0000ff"><b>}</b></font>,<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"ROWS"</font><font color="#0000ff"><b>}</b></font>,<font color="#4169e1"><b>undef</b></font><font color="#0000ff"><b>)</b></font>= <font color="#4169e1"><b>unpack</b></font> <font color="#0000ff"><b>(</b></font><font color="#007400">"V3"</font>, <font color="#1f32ff">$buffer</font><font color="#0000ff"><b>)</b></font>;

    <font color="#0000ff"><b>{</b></font>
	<font color="#ff0000">## Header, if you can be bothered</font><BR>	<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$headerstring</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_unpack_length_string</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>)</b></font>;
    <font color="#0000ff"><b>}</b></font>

    <font color="#ff0000">## Algorithm name</font><BR>    <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"ALGORITHM"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_unpack_length_string</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>)</b></font>;

    <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"ALGORITHMPARAMS"</font><font color="#0000ff"><b>}</b></font>=<font color="#0000ff"><b>{</b></font><font color="#0000ff"><b>}</b></font>;
	<font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$algorithmparamsstr</font>=<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_unpack_length_string</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>)</b></font>;
	<font color="#0000ff"><b>foreach</b></font> <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$i</font> <font color="#0000ff"><b>(</b></font><font color="#4169e1"><b>split</b></font> <font color="#006400"><b>/[; ]/</b></font>,<font color="#1f32ff">$algorithmparamsstr</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	    <font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$k</font>,<font color="#1f32ff">$v</font><font color="#0000ff"><b>)</b></font>=<font color="#4169e1"><b>split</b></font> <font color="#006400"><b>/[\=\-\:]/</b></font>,<font color="#1f32ff">$i</font>;
	    <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"ALGORITHMPARAMS"</font><font color="#0000ff"><b>}</b></font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#1f32ff">$k</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$v</font>;
	<font color="#0000ff"><b>}</b></font>
	
    <font color="#0000ff"><b>}</b></font>


    <font color="#0000ff"><b>(</b></font><font color="#4169e1"><b>read</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>, <font color="#1f32ff">$buffer</font>, 16<font color="#0000ff"><b>)</b></font>==16<font color="#0000ff"><b>)</b></font> or <font color="#4169e1"><b>die</b></font> <font color="#007400">"Can no longer read from file"</font>;

    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$outliercount</font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$maskedcount</font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$subgrids</font>;

    <font color="#ff0000">## Cell margin is put in Algorithm Parameters in MAS5 files. We'll emulate this behaviour here.</font><BR>
    <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"ALGORITHMPARAMS"</font><font color="#0000ff"><b>}</b></font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"CellMargin"</font><font color="#0000ff"><b>}</b></font>,<font color="#1f32ff">$outliercount</font>,<font color="#1f32ff">$maskedcount</font>,<font color="#1f32ff">$subgrids</font><font color="#0000ff"><b>)</b></font>=<font color="#4169e1"><b>unpack</b></font><font color="#0000ff"><b>(</b></font><font color="#007400">"V4"</font>,<font color="#1f32ff">$buffer</font><font color="#0000ff"><b>)</b></font>;

    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$subgrids</font>!=0<font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	croak <font color="#007400">"Bio::Affymetrix::CEL cannot do subgrids"</font>;
    <font color="#0000ff"><b>}</b></font>


    <font color="#ff0000">## Intensities</font><BR>
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">@intensitymap</font>;

    <font color="#0000ff"><b>for</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$y</font>=0;<font color="#1f32ff">$y</font>&lt;<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"ROWS"</font><font color="#0000ff"><b>}</b></font>;<font color="#1f32ff">$y</font>++<font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#0000ff"><b>for</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$x</font>=0;<font color="#1f32ff">$x</font>&lt;<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"COLS"</font><font color="#0000ff"><b>}</b></font>;<font color="#1f32ff">$x</font>++<font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>

	    <font color="#0000ff"><b>(</b></font><font color="#4169e1"><b>read</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>, <font color="#1f32ff">$buffer</font>, 10<font color="#0000ff"><b>)</b></font>==10<font color="#0000ff"><b>)</b></font> or croak <font color="#007400">"Can no longer read from file"</font>;
	    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">@q</font>= <font color="#4169e1"><b>unpack</b></font> <font color="#0000ff"><b>(</b></font><font color="#007400">"f2S"</font>, <font color="#1f32ff">$buffer</font><font color="#0000ff"><b>)</b></font>;

	    <font color="#4169e1"><b>push</b></font> <font color="#1f32ff">@q</font>,<font color="#0000ff"><b>(</b></font><font color="#4169e1"><b>undef</b></font>,<font color="#4169e1"><b>undef</b></font><font color="#0000ff"><b>)</b></font>;

	    <font color="#1f32ff">$intensitymap</font><font color="#0000ff"><b>[</b></font><font color="#1f32ff">$x</font><font color="#0000ff"><b>]</b></font><font color="#0000ff"><b>[</b></font><font color="#1f32ff">$y</font><font color="#0000ff"><b>]</b></font>=\<font color="#1f32ff">@q</font>;

	<font color="#0000ff"><b>}</b></font>
    <font color="#0000ff"><b>}</b></font>

    <font color="#ff0000">## Masks </font><BR>
    <font color="#0000ff"><b>for</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$i</font>=0;<font color="#1f32ff">$i</font>&lt;<font color="#1f32ff">$maskedcount</font>;<font color="#1f32ff">$i</font>++<font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#0000ff"><b>(</b></font><font color="#4169e1"><b>read</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>, <font color="#1f32ff">$buffer</font>, 4<font color="#0000ff"><b>)</b></font>==4<font color="#0000ff"><b>)</b></font> or croak <font color="#007400">"Can no longer read from file"</font>;
	<font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$x</font>,<font color="#1f32ff">$y</font><font color="#0000ff"><b>)</b></font>= <font color="#4169e1"><b>unpack</b></font> <font color="#0000ff"><b>(</b></font><font color="#007400">"S2"</font>, <font color="#1f32ff">$buffer</font><font color="#0000ff"><b>)</b></font>;
	
	<font color="#1f32ff">$intensitymap</font><font color="#0000ff"><b>[</b></font><font color="#1f32ff">$x</font><font color="#0000ff"><b>]</b></font><font color="#0000ff"><b>[</b></font><font color="#1f32ff">$y</font><font color="#0000ff"><b>]</b></font>-&gt;<font color="#0000ff"><b>[</b></font>3<font color="#0000ff"><b>]</b></font>=1;
	
    <font color="#0000ff"><b>}</b></font>


    <font color="#0000ff"><b>for</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$i</font>=0;<font color="#1f32ff">$i</font>&lt;<font color="#1f32ff">$outliercount</font>;<font color="#1f32ff">$i</font>++<font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#0000ff"><b>(</b></font><font color="#4169e1"><b>read</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>, <font color="#1f32ff">$buffer</font>, 4<font color="#0000ff"><b>)</b></font>==4<font color="#0000ff"><b>)</b></font> or croak <font color="#007400">"Can no longer read from file"</font>;
	<font color="#0000ff"><b>my</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$x</font>,<font color="#1f32ff">$y</font><font color="#0000ff"><b>)</b></font>= <font color="#4169e1"><b>unpack</b></font> <font color="#0000ff"><b>(</b></font><font color="#007400">"S2"</font>, <font color="#1f32ff">$buffer</font><font color="#0000ff"><b>)</b></font>;
	
	<font color="#1f32ff">$intensitymap</font><font color="#0000ff"><b>[</b></font><font color="#1f32ff">$x</font><font color="#0000ff"><b>]</b></font><font color="#0000ff"><b>[</b></font><font color="#1f32ff">$y</font><font color="#0000ff"><b>]</b></font>-&gt;<font color="#0000ff"><b>[</b></font>4<font color="#0000ff"><b>]</b></font>=1;
	
    <font color="#0000ff"><b>}</b></font>

    <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"_INTENSITY"</font><font color="#0000ff"><b>}</b></font>=\<font color="#1f32ff">@intensitymap</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE8"></A><B>_split_line</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE7">prev</A></TD><TD WIDTH="30"><A HREF="#CODE9">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff00ff"><b>_split_line</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$line</font>=<font color="#4169e1"><b>shift</b></font>;
    
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">@q</font>=<font color="#4169e1"><b>split</b></font> <font color="#006400"><b>/=/</b></font>,<font color="#1f32ff">$line</font>,2;

    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#4169e1"><b>scalar</b></font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">@q</font><font color="#0000ff"><b>)</b></font>!=2<font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#4169e1"><b>die</b></font> <font color="#007400">"Can't parse line "</font>.<font color="#1f32ff">$line</font>;
    <font color="#0000ff"><b>}</b></font>

    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">@q</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE9"></A><B>_unpack_length_string</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE8">prev</A></TD><TD WIDTH="30"><A HREF="#CODE10">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff00ff"><b>_unpack_length_string</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$fh</font>=<font color="#4169e1"><b>shift</b></font>;
    
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$buffer</font>;

    <font color="#0000ff"><b>(</b></font><font color="#4169e1"><b>read</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$fh</font>, <font color="#1f32ff">$buffer</font>, 4<font color="#0000ff"><b>)</b></font>==4<font color="#0000ff"><b>)</b></font> or <font color="#4169e1"><b>die</b></font> <font color="#007400">"Can no longer read from file"</font>;;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$len</font> = <font color="#4169e1"><b>unpack</b></font> <font color="#0000ff"><b>(</b></font><font color="#007400">"V"</font>, <font color="#1f32ff">$buffer</font><font color="#0000ff"><b>)</b></font>;
    <font color="#0000ff"><b>(</b></font><font color="#4169e1"><b>read</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$fh</font>, <font color="#1f32ff">$buffer</font>, <font color="#1f32ff">$len</font><font color="#0000ff"><b>)</b></font>==<font color="#1f32ff">$len</font><font color="#0000ff"><b>)</b></font> or <font color="#4169e1"><b>die</b></font> <font color="#007400">"Can no longer read from file"</font>;

    <font color="#0000ff"><b>return</b></font> <font color="#4169e1"><b>unpack</b></font><font color="#0000ff"><b>(</b></font><font color="#007400">"a"</font>.<font color="#1f32ff">$len</font>,<font color="#1f32ff">$buffer</font><font color="#0000ff"><b>)</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE10"></A><B>algorithm_name</B></TD><TD><A HREF="#POD1">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE9">prev</A></TD><TD WIDTH="30"><A HREF="#CODE11">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>algorithm_name</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font>=<font color="#4169e1"><b>shift</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"ALGORITHM"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$q</font>;
    <font color="#0000ff"><b>}</b></font>

    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"ALGORITHM"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE11"></A><B>algorithm_params</B></TD><TD><A HREF="#POD2">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE10">prev</A></TD><TD WIDTH="30"><A HREF="#CODE12">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>algorithm_params</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font>=<font color="#4169e1"><b>shift</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"ALGORITHMPARAMS"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$q</font>;
    <font color="#0000ff"><b>}</b></font>

    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"ALGORITHMPARAMS"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE12"></A><B>axis_invert_x</B></TD><TD><A HREF="#POD3">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE11">prev</A></TD><TD WIDTH="30"><A HREF="#CODE13">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>axis_invert_x</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font>=<font color="#4169e1"><b>shift</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"AXIS-INVERTX"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$q</font>;
    <font color="#0000ff"><b>}</b></font>
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"AXIS-INVERTX"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE13"></A><B>axis_invert_y</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE12">prev</A></TD><TD WIDTH="30"><A HREF="#CODE14">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>axis_invert_y</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font>=<font color="#4169e1"><b>shift</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"AXISINVERTY"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$q</font>;
    <font color="#0000ff"><b>}</b></font>
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"AXISINVERTY"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE14"></A><B>grid_corner_ll</B></TD><TD><A HREF="#POD4">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE13">prev</A></TD><TD WIDTH="30"><A HREF="#CODE15">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>grid_corner_ll</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font>=<font color="#4169e1"><b>shift</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"GRIDCORNERLL"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$q</font>;
    <font color="#0000ff"><b>}</b></font>
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"GRIDCORNERLL"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE15"></A><B>grid_corner_lr</B></TD><TD><A HREF="#POD5">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE14">prev</A></TD><TD WIDTH="30"><A HREF="#CODE16">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>grid_corner_lr</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font>=<font color="#4169e1"><b>shift</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"GRIDCORNERLR"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$q</font>;
    <font color="#0000ff"><b>}</b></font>
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"GRIDCORNERLR"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE16"></A><B>grid_corner_ul</B></TD><TD><A HREF="#POD6">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE15">prev</A></TD><TD WIDTH="30"><A HREF="#CODE17">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>grid_corner_ul</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font>=<font color="#4169e1"><b>shift</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"GRIDCORNERUL"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$q</font>;
    <font color="#0000ff"><b>}</b></font>
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"GRIDCORNERUL"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE17"></A><B>grid_corner_ur</B></TD><TD><A HREF="#POD7">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE16">prev</A></TD><TD WIDTH="30"><A HREF="#CODE18">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>grid_corner_ur</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font>=<font color="#4169e1"><b>shift</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"GRIDCORNERUR"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$q</font>;
    <font color="#0000ff"><b>}</b></font>
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"GRIDCORNERUR"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE18"></A><B>intensity_map</B></TD><TD><A HREF="#POD8">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE17">prev</A></TD><TD WIDTH="30"><A HREF="#CODE19">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>intensity_map</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font>=<font color="#4169e1"><b>shift</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"_INTENSITY"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$q</font>;
    <font color="#0000ff"><b>}</b></font>

    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"_INTENSITY"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE19"></A><B>new</B></TD><TD><A HREF="#POD9">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE18">prev</A></TD><TD WIDTH="30"><A HREF="#CODE20">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>new</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$class</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#0000ff"><b>{</b></font><font color="#0000ff"><b>}</b></font>;

    <font color="#4169e1"><b>bless</b></font> <font color="#1f32ff">$self</font>,<font color="#1f32ff">$class</font>;
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE20"></A><B>original_cols</B></TD><TD><A HREF="#POD10">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE19">prev</A></TD><TD WIDTH="30"><A HREF="#CODE21">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>original_cols</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;

    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"COLS"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE21"></A><B>original_file_name</B></TD><TD><A HREF="#POD11">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE20">prev</A></TD><TD WIDTH="30"><A HREF="#CODE22">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>original_file_name</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;

    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"file_name"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE22"></A><B>original_format</B></TD><TD><A HREF="#POD12">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE21">prev</A></TD><TD WIDTH="30"><A HREF="#CODE23">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>original_format</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FORMAT"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE23"></A><B>original_rows</B></TD><TD><A HREF="#POD13">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE22">prev</A></TD><TD WIDTH="30"><A HREF="#CODE24">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>original_rows</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;

    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"ROWS"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE24"></A><B>original_version</B></TD><TD><A HREF="#POD14">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE23">prev</A></TD><TD WIDTH="30"><A HREF="#CODE25">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>original_version</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"VERSION"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE25"></A><B>parse_from_file</B></TD><TD><A HREF="#POD15">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE24">prev</A></TD><TD WIDTH="30"><A HREF="#CODE26">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>parse_from_file</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$filename</font>=<font color="#4169e1"><b>shift</b></font>;

    <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"file_name"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$filename</font>;

    <font color="#4169e1"><b>open</b></font> CDF,<font color="#007400">"&lt;"</font>.<font color="#1f32ff">$filename</font> or <font color="#4169e1"><b>die</b></font> <font color="#007400">"Cannot open file "</font>.<font color="#1f32ff">$filename</font>;

    <font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">parse_from_filehandle</font><font color="#0000ff"><b>(</b></font>\*CDF<font color="#0000ff"><b>)</b></font>;

    <font color="#4169e1"><b>close</b></font> CDF;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE26"></A><B>parse_from_filehandle</B></TD><TD><A HREF="#POD16">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE25">prev</A></TD><TD WIDTH="30"><A HREF="#CODE27">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>parse_from_filehandle</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>=<font color="#4169e1"><b>shift</b></font>;

    <font color="#4169e1"><b>binmode</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>;

    <font color="#ff0000">## First step- detect whether it's a GCOS or MAS5 file</font><BR>    
    <font color="#ff0000">## A buffer for reading things into</font><BR>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$buffer</font>; 

    <font color="#ff0000">## XDA files have their first feature as a magic number, 64</font><BR>
    <font color="#4169e1"><b>read</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>, <font color="#1f32ff">$buffer</font>, 4<font color="#0000ff"><b>)</b></font> or <font color="#4169e1"><b>die</b></font> <font color="#007400">"Cannot read from file"</font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$magic_number</font> = <font color="#4169e1"><b>unpack</b></font><font color="#0000ff"><b>(</b></font><font color="#007400">"V"</font>, <font color="#1f32ff">$buffer</font><font color="#0000ff"><b>)</b></font>;


    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$magic_number</font>==64<font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#ff0000">## It's a GCOS v1.2 &quot;v4 file&quot;, XDA file! Hurrah!</font><BR>	<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_parse_xda</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>)</b></font>;
	<font color="#4169e1"><b>delete</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>;
	<font color="#0000ff"><b>return</b></font>;
    <font color="#0000ff"><b>}</b></font>

    <font color="#4169e1"><b>binmode</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>,<font color="#007400">":crlf"</font>;

    <font color="#1f32ff">$buffer</font>.=<font color="#ff8204">readline</font><font color="#0000ff"><b>(</b></font><font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font><font color="#0000ff"><b>)</b></font>;

    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#1f32ff">$buffer</font> <font color="#0000ff"><b>eq</b></font> <font color="#007400">"[CEL]\n"</font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#ff0000">## It's a MAS5/GCOS v1.0 &quot;v3 file&quot;! Yippee!</font><BR>	<font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">_parse_mas5</font><font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>)</b></font>;
	<font color="#4169e1"><b>delete</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"FH"</font><font color="#0000ff"><b>}</b></font>;

	<font color="#0000ff"><b>return</b></font>;
    <font color="#0000ff"><b>}</b></font>

    croak <font color="#007400">"This doesn't look like a CEL file to me."</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE27"></A><B>parse_from_string</B></TD><TD><A HREF="#POD17">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE26">prev</A></TD><TD WIDTH="30"><A HREF="#CODE28">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>parse_from_string</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$string</font>=<font color="#4169e1"><b>shift</b></font>;


    <font color="#4169e1"><b>open</b></font> CEL,<font color="#007400">"&lt;"</font>,\<font color="#1f32ff">$string</font> or <font color="#4169e1"><b>die</b></font> <font color="#007400">"Cannot open string stream"</font>;

    <font color="#1f32ff">$self</font>-&gt;<font color="#ff8204">parse_from_filehandle</font><font color="#0000ff"><b>(</b></font>\*CEL<font color="#0000ff"><b>)</b></font>;

    <font color="#4169e1"><b>close</b></font> CEL;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE28"></A><B>swap_xy</B></TD><TD><A HREF="#POD18">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE27">prev</A></TD><TD WIDTH="30"><A HREF="#CODE29">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>swap_xy</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font>=<font color="#4169e1"><b>shift</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"SWAPXY"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$q</font>;
    <font color="#0000ff"><b>}</b></font>
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"SWAPXY"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE29"></A><B>write_to_filehandle</B></TD><TD>description</TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE28">prev</A></TD><TD WIDTH="30"><A HREF="#CODE30">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>write_to_filehandle</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$filehandle</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$format</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$version</font>=<font color="#4169e1"><b>shift</b></font>;

    <font color="#4169e1"><b>binmode</b></font> <font color="#1f32ff">$filehandle</font>,<font color="#007400">":crlf"</font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE30"></A><B>x_offset</B></TD><TD><A HREF="#POD19">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE29">prev</A></TD><TD WIDTH="30"><A HREF="#CODE31">next</A></TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>x_offset</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font>=<font color="#4169e1"><b>shift</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"OFFSETX"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$q</font>;
    <font color="#0000ff"><b>}</b></font>
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"OFFSETX"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#dcab68"><TD WIDTH="200"><A NAME="CODE31"></A><B>y_offset</B></TD><TD><A HREF="#POD20">description</A></TD><TD WIDTH="30"><A HREF="#TOP">top</A></TD><TD WIDTH="30"><A HREF="#CODE30">prev</A></TD><TD WIDTH="30">next</TD></TR></TABLE>
<font color="#0000ff"><b>sub</b></font> <font color="#ff0000"><b>y_offset</b></font>
 {<pre>    <font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$self</font>=<font color="#4169e1"><b>shift</b></font>;
    <font color="#0000ff"><b>if</b></font> <font color="#0000ff"><b>(</b></font><font color="#0000ff"><b>my</b></font> <font color="#1f32ff">$q</font>=<font color="#4169e1"><b>shift</b></font><font color="#0000ff"><b>)</b></font> <font color="#0000ff"><b>{</b></font>
	<font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"OFFSETY"</font><font color="#0000ff"><b>}</b></font>=<font color="#1f32ff">$q</font>;
    <font color="#0000ff"><b>}</b></font>
    <font color="#0000ff"><b>return</b></font> <font color="#1f32ff">$self</font>-&gt;<font color="#0000ff"><b>{</b></font><font color="#007400">"OFFSETY"</font><font color="#0000ff"><b>}</b></font>;</pre>}<BR>
<A NAME="General"></A>
<HR><H2>General documentation</H2>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0">
<TR BGCOLOR="#4492df"><TD><A NAME="_pod_NOTES"><B>NOTES</A></B></TD>
<TD><A HREF="#TOP">top</A></TD></TR><TR><TD COLSPAN="2"><pre></pre>
</TD></TR>
<TR BGCOLOR="#4492df"><TD><A NAME="_pod_REFERENCE"><B>REFERENCE</A></B></TD>
<TD><A HREF="#TOP">top</A></TD></TR><TR><TD COLSPAN="2"><pre>Modules were written with the official Affymetrix documentation, which<BR>can be located at <a href="http://www.affymetrix.com/support/developer/AffxFileFormats.ZIP" target="urlWin">http://www.affymetrix.com/support/developer/AffxFileFormats.ZIP</a><BR></pre>
</TD></TR>
<TR BGCOLOR="#4492df"><TD><A NAME="_pod_COMPATIBILITY"><B>COMPATIBILITY</A></B></TD>
<TD><A HREF="#TOP">top</A></TD></TR><TR><TD COLSPAN="2"><pre>This module can parse the CEL files produced by the Affymetrix software<BR>MAS 5 and GCOS.<BR></pre>
</TD></TR>
<TR BGCOLOR="#4492df"><TD><A NAME="_pod_TODO"><B>TODO</A></B></TD>
<TD><A HREF="#TOP">top</A></TD></TR><TR><TD COLSPAN="2"><pre>Writing CEL files as well as reading them.<BR></pre>
</TD></TR>
<TR BGCOLOR="#4492df"><TD><A NAME="_pod_COPYRIGHT"><B>COPYRIGHT</A></B></TD>
<TD><A HREF="#TOP">top</A></TD></TR><TR><TD COLSPAN="2"><pre>Copyright (C) 2005 by Nick James, David J Craigon, NASC, The<BR>University of Nottingham<BR><BR>This module is free software. You can copy or redistribute it under the same terms as Perl itself. <BR><BR>Affymetrix is a registered trademark of Affymetrix Inc., Santa<BR>Clara, California, USA.<BR></pre>
</TD></TR>
<TR BGCOLOR="#4492df"><TD><A NAME="_pod_AUTHORS"><B>AUTHORS</A></B></TD>
<TD><A HREF="#TOP">top</A></TD></TR><TR><TD COLSPAN="2"><pre>    <BR>Nick James (nick at arabidopsis.info)<BR><BR>David J Craigon (david at arabidopsis.info)<BR><BR>Nottingham Arabidopsis Stock Centre (<a href="http://arabidopsis.info" target="urlWin">http://arabidopsis.info</a>), University of Nottingham.<BR></pre>
</TD></TR>
</TABLE>
</body>
</html>
